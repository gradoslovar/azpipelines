trigger:
  branches:
    include:
      - refs/tags/v*

pr: none

name: $(BuildID)

pool:
  vmImage: ubuntu-latest
  # vmImage: windows-2019

stages:
  - stage: Stage1
    dependsOn: []
    # pool:
    #   vmImage: ubuntu-latest
    jobs:
    - job: Stage1
      steps:
      - pwsh: |
          ls env: | ft -autosize

      - pwsh: |
          Write-Host "Stage1

      - template: ../templates/template.yaml

      - pwsh: |
          ls env: | ft -autosize
        condition: Always()

  - stage: Stage2
    dependsOn: []
    # pool:
    #   vmImage: ubuntu-latest
    jobs:
    - job: Stage2
      steps:
      - pwsh: |
          ls env: | ft -autosize

      - pwsh: |
          Write-Host "Stage2"

      - template: ../templates/template.yaml